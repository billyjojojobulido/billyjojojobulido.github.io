

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/dog_icon.jpg">
  <link rel="icon" href="/img/dog_icon.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Baocheng Wang">
  <meta name="keywords" content="">
  
    <meta name="description" content="SMART ORC: A SMART-on-FHIR Oncofertility Risk Calculator App">
<meta property="og:type" content="article">
<meta property="og:title" content="SMART ORC: A SMART-on-FHIR Oncofertility Risk Calculator App">
<meta property="og:url" content="https://billyjojojobulido.github.io/2023/10/23/SMART/index.html">
<meta property="og:site_name" content="Baocheng Wang">
<meta property="og:description" content="SMART ORC: A SMART-on-FHIR Oncofertility Risk Calculator App">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-10-23T03:46:23.000Z">
<meta property="article:modified_time" content="2024-01-26T04:44:56.262Z">
<meta property="article:author" content="Baocheng Wang">
<meta property="article:tag" content="Tech">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://billyjojojobulido.github.io/2023/11/20/SOGA/login.png">
  
  
  
  <title>SMART ORC: A SMART-on-FHIR Oncofertility Risk Calculator App - Baocheng Wang</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"billyjojojobulido.github.io","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Baocheng Wang</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/stars.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="SMART ORC: A SMART-on-FHIR Oncofertility Risk Calculator App"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-11-20 14:46" pubdate>
          October 23, 2023
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          1.1k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
          15 mins
        
      </span>
    
  </div>

      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">SMART ORC: A SMART-on-FHIR Oncofertility Risk Calculator App</h1>
            
            
              <div class="markdown-body">
                <p>
                  SMART ORC, which is an oncofertility calculator app based on SMART on FHIR standards and specifications. It is designed for the "Developing a SMART on FHIR app" course as a demo app. Functionally, the SMART ORC offers the clinicians to calculate the risk of infertility based on the drugs and dosages of the treatments, and also provides an interface to calculate Total CED (Cyclophosphamide Equivalent Dose).
                </p>
                
                <h2 id="Project-Introduction"><a href="#Project-Introduction" class="headerlink" title="Project Introduction"></a>Project Introduction</h2>
                <p>A national training program for FHIR (Fast Healthcare Interoperability Resources) is funded by ADHA and in collaboration with CSIRO, HL7 Australia, and the Centre for Digital Transformation of Health at UniMelb. There are over 700 EOIs for these training courses from architects, developers, managers, and clinicians in Health Tech Companies (e.g., Microsoft, Telstra Health), jurisdictions (e.g., NSW), the federal government (e.g., ADHA), and health organisations (e.g, Monash Health, Queensland Health). This project will concentrate idea on the course "Developing a SMART on FHIR app."</p>
                <p>This project's main objective is to develop a mock clinical decision support application SMART ORC, which is an oncofertility calculator app based on SMART on FHIR standards and specifications. It is designed for the "Developing a SMART on FHIR app" course as a demo app. Functionally, the SMART ORC offers the clinicians to calculate the risk of infertility based on the drugs and dosages of the treatments, and also provides an interface to calculate Total CED (Cyclophosphamide Equivalent Dose). For the course and program, it aims to serve as a comprehensive guide for course participants, offering step-by-step references throughout their development journey. Beyond educational purposes, the demo app could be served as a valuable presentation tool for both companies and government groups, highlighting the real-world benefits of SMART on FHIR applications.</p>


                <h2 id="Project-Demo-Video"><a href="#Project-Demo-Video" class="headerlink" title="Project Demo Video"></a>Project Demo Video</h2>

                <div class="video-container">
                  <iframe src="https://www.youtube.com/embed/8fbNUPc7T70" title="2023 S2 DE-Redback Final Demo Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin"  loading="lazy"  allowfullscreen></iframe>
                </div>

<h2 id="Key-Techonlogies"><a href="#Key-Techonlogies" class="headerlink" title="Key Techonlogies"></a>Key Techonlogies</h2>
<ul>
<li>Vue.js</li>
<li>JavaScript</li>
<li>SMART-on-FHIR</li>
<li>MELD EHR Sandbox</li>
</ul>

<h2 id="Architecture-Design"> <a href="#Architecture-Design" class="headerlink" title="Architecture Design"></a>Architecture Design</h2>

<p>The system can be divided into 3 main components, including the SMART-on-FHIR Application, the Authorization Server, and the Resource Server. Unlike the MVC(Model-View-Controller) Pattern, this project is an application written in Vue.js (HTML, CSS, JavaScript) using a OAuth Server and a FHIR server as the application backend.</p>

<p>All the paitent data and the clinician data will be preserved in the Resource Server. In the scope of this project, we will be provided with a certain FHIR Resources Server. To manipulate the data for computation, the SMART-on-FHIR Application will send a HTTP request to this Resource Server via a set of RESTful APIs, and the Resource Server will return the requested data back if they can authenticate the clinician and patient.</p>

<p>The authentication and authoristation of the Patient and Clinician will rely on the Authorization Server provided by the OpenID. To do so, the SMART-on-FHIR application will first send request to the Authorization Server via OAuth2 protocol APIs. If the Authorization Server could validate the identity, it will return a set of SMART-on-FHIR Context back to the Application, which includes information about the currently selected patient, clinical encounter, styling information, etc.</p>

<div style="text-align: center;">

  <img src="architecture.png" srcset="/img/loading.gif" lazyload alt="architects" width="450">
</div>

<h2 id="Key-Features"><a href="#Key-Features" class="headerlink" title="Key Features"></a>Key Features</h2>


<h3 id="OAuth"><a href="#OAuth" class="headerlink" title="OAuth"></a>SMART-on-FHIR OAuth Consent</h3>
<p>Because the final project was expected to have access to a variety of real-world patient data, most stakeholders had ethical concerns regarding the patient’s privacy and security. To resolve this issue, I first decided to adopt an engineering strategy of regular ethics evaluation within the team to ensure that the team could stick to the latest ethical standards and values, thereby ensuring that the project would always remain ethically acceptable against the changing environment and requirements.</p>

<p>During the evaluation, we agreed that privacy had the highest ethical impact, and the patient data should be protected even though the clinicians were the only users of the app by design. Although some of us argued that doctors using their own patient data for treatment had its legitimacy, from a legal perspective, obtaining patient consent before using their data is the most basic ethical obligation.</p>

<p>Thus, I developed the Authentication function based on OAuth2 protocol in this application, which would be automatically triggered once the clinician attempted to fetch a patient’s medical records from the databases. The clinician would be directed to the Authentication page of the data source, and the clinician would not be allowed to access the patient’s data, unless the patient authorizes the clinician’s request by logging into the databases with his or her own medical account, and clicks the “Authorize” button on the Authorization page. The authentication page was shown below.</p>


<img src="OAuth_page.jpg" srcset="/img/loading.gif" lazyload alt="SMART-on-FHIR OAuth Consent Page" width="650">

<p>This Authentication mechanism would not be time consuming or complicated in the scenario where the clinician and patient are meeting face-to-face in the clinics or hospitals, and it could ensure that the clinician can only access the data under the supervision of the patients.</p>


<h3 id="CED"><a href="#CED" class="headerlink" title="CED"></a>Cyclophosphamide Equivalent Dose Calculator</h3>

<p>We developed an additional interface to calculate the Total CED (Cyclophosphamide Equivalent Dose) from a list of chemotherapy agents. The clinician should be able to enter the dosage for each of the agent. The app will calculate the CED for each from the dosage (logic for calculation of CED is provided by our client Mady Mani) and the total CED will be the sum of all.</p>

<!-- <img src="/2023/11/20/SOGA/home.png" srcset="/img/loading.gif" lazyload class="" title="Home"> -->
<img src="CED_fetch_data.jpg" srcset="/img/loading.gif" lazyload alt="Cyclophosphamide Equivalent Dose Calculator" width="650">

<p>With the implementation of SMART-on-FHIR protocol, we has enabled the auto data fetching feature that allows the clinicians to fetch patients' historical dosage data from their medical records preserved in some EHR systems, by simply clicking the "Fetch" button.</p>

<h3 id="ORC"><a href="#ORC" class="headerlink" title="ORC"></a>Oncofertility Risk Calculator</h3>

<p>We developed a formal interface to calculate the Oncofertility Risk based on the Total CED value and other dosage data.

  Similar to the CED calculator, the auto EHR data fetching via SMART-on-FHIR protocol has been enabled, and clinicians are also able to fill in and change the data by themselves.
</p>


<img src="ORC_fetch_data.jpg" srcset="/img/loading.gif" lazyload alt="Oncofertility Risk Calculator" width="650">

<p>After all the information is filled out, the oncofertility risk report will be generated after the clinician clicks the "Submit" Button.</p>

<img src="report_page.jpg" srcset="/img/loading.gif" lazyload alt="Oncofertility Risk Report" width="650">

<h2 id="Accknowledgement"> <a href="#Accknowledgement" class="headerlink" title="Accknowledgement"></a> Accknowledgement</h2>
<p>
  <span style="font-weight: bold;">
    I would like to express my sincere gratitude to all the contributors to this project. </span>
  <br>
  Contributors are listed below in alphabetical order of their first name (along with their roles). </p>
<ul>
  <li> <a href="https://www.linkedin.com/in/baocheng-wang-504b351a5">Baocheng Wang</a> - Product Owner, Develoepr</li>
  <li> <a href="https://www.linkedin.com/in/yanhao-xu-936b961b4">Yanhao Xu</a> - Scrum Master, Developer</li>
  <li> <a href="https://www.linkedin.com/in/yuqiu-wang-3a5a4b174"> Yuqiu Wang</a> - Developer</li>
  <li> <a href="https://www.linkedin.com/in/zhan-su-a43789234">Zhan Su</a> - Developer</li>
  <li> <a href="https://www.linkedin.com/in/zhixuan-ye-369670287">Zhixuan Ye</a> - Developer</li>
</ul>

<p>
  I would also like to extend my appreciation to all the stakeholders that support our development journey, including:
</p>
<ul>
  <li> Sebastian Bobadilla - UniMelb Supervisor</li>
  <li> <a href="https://www.linkedin.com/in/kayley-lyons-7311bb55/">Kayley Lyons</a> - Client, Digital Health Team Leader</li>
  <li>  Mady Mani - Client, Digital Health Project Manager </li>
  <li> Kit Huckvale - Client, Digital Health Research Fellow</li>
</ul>


<h2 id="Related"><a href="#Related" class="headerlink" title="Related"></a>Related</h2>
<ul>
  <li><a target="_blank" rel="noopener" href="https://handbook.unimelb.edu.au/2024/subjects/comp90082">UniMelb Handbook: Software Project (COMP90082)</a></li>
  <li><a target="_blank" rel="noopener" href="https://docs.smarthealthit.org/">SMART-on-FHIR Doc</a></li>
  <li><a target="_blank" rel="noopener" href="https://docs.smarthealthit.org/client-js/">SMART on FHIR JavaScript Library - JavaScript client for FHIR</a></li>

</ul>

              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Tech/" class="print-no-link">#Tech</a>
      
    </div>
  
</div>



  <div class="license-box my-3">
    <div class="license-title">
      <div>SMART ORC: A SMART-on-FHIR Oncofertility Risk Calculator App</div>
      <div>https://billyjojojobulidogithub.io/2023/10/23/SMART/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Baocheng Wang</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>October 23, 2023</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                    <i class="iconfont icon-nc"></i>
                    <i class="iconfont icon-nd"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>

                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/11/20/SOGA/index.html" title="SOGA: A Scavenger-Hunt Online Game App">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">SOGA: A Scavenger-Hunt Online Game App</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/04/24/ENASE/index.html" title="Evaluation of Contemporary Smart Contract Analysis Tools">
                        <span class="hidden-mobile">Evaluation of Contemporary Smart Contract Analysis Tools</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>

      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  

</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
